!function(){"use strict";function extend(defaults,options){var out={};options||(options={});for(var keys=Object.keys(defaults).concat(Object.keys(options)),i=0;i<keys.length;i++)out[keys[i]]=options.hasOwnProperty(keys[i])?options[keys[i]]:defaults[keys[i]];return out}function rad(value){return Math.PI/180*value}function Gauge(el,options){if(this.el=el,this.options=extend(defaults,options),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("class","gauge"),this.options.from===this.options.to)throw new Error('"from" and "to" values cannot be equal');this.delta=this.options.to-this.options.from;var cls=this.el.className;this.el.className=cls?cls+" gauge-container":"gauge-container";var arcRadius,innerRadius,outerRadius,textRadius,size=this.size(),minSize=size.width>=size.height?size.height:size.width;this.options.inset?(arcRadius=.97,innerRadius=.93,outerRadius=.95,textRadius=.85):(arcRadius=.75,innerRadius=.78,outerRadius=.8,textRadius=.85);var i,sx,sy,ex,ey,radius=minSize/2*arcRadius,startAngle=rad((360-this.options.angle)/2),endAngle=startAngle+rad(this.options.angle),marks=[],stepAngle=rad(this.options.step/Math.abs(this.delta)*this.options.angle);this.delta<0&&this.options.step>0&&(this.options.step=-this.options.step);var cvalue=this.options.from;for(i=startAngle;endAngle>=i;i+=stepAngle){var sin=Math.sin(i),cos=Math.cos(i);sx=minSize/2*(1-sin*innerRadius),sy=minSize/2*(1+cos*innerRadius),ex=minSize/2*(1-sin*outerRadius),ey=minSize/2*(1+cos*outerRadius),marks.push("M"+sx+","+sy+" L"+ex+","+ey);var text=document.createElementNS("http://www.w3.org/2000/svg","text");text.setAttribute("class","gauge-marks-text"),text.setAttribute("x",minSize/2*(1-sin*textRadius)),text.setAttribute("y",minSize/2*(1+cos*textRadius)),text.appendChild(document.createTextNode(this.options.markFormat?this.options.markFormat(cvalue):cvalue)),this.svg.appendChild(text),cvalue+=this.options.step}var marksPath=document.createElementNS("http://www.w3.org/2000/svg","path");marksPath.setAttribute("class","gauge-marks"),marksPath.setAttribute("d",marks.join(" ")),this.svg.appendChild(marksPath);var segments=this.options.segments.slice();segments.sort(function(a,b){return this.delta>0?a-b:b-a}.bind(this)),segments[0]!==this.options.from&&segments.unshift(this.options.from),segments[segments.length-1]!==this.options.to&&segments.push(this.options.to),sx=size.width/2-radius*Math.sin(startAngle),sy=size.height/2+radius*Math.cos(startAngle);var angle,path,large;for(i=1;i<segments.length;i++)angle=rad(Math.abs(segments[i]-segments[i-1])*this.options.angle/Math.abs(this.delta)),large=Number(angle>rad(180)),angle+=startAngle,ex=size.width/2-radius*Math.sin(angle),ey=size.height/2+radius*Math.cos(angle),path=document.createElementNS("http://www.w3.org/2000/svg","path"),path.setAttribute("d","M"+sx+" "+sy+" A"+radius+","+radius+" 0 "+large+",1  "+ex+","+ey),path.setAttribute("class","gauge-arc gauge-segment-"+i),this.svg.appendChild(path),sx=ex,sy=ey,startAngle=angle;if(this.el.appendChild(this.svg),this.arrow=document.createElement("div"),this.arrow.setAttribute("class","gauge-arrow"),this.el.appendChild(this.arrow),this.options.label){var label=document.createElementNS("http://www.w3.org/2000/svg","text");label.setAttribute("class","gauge-label"),label.setAttribute("x",size.width/2),label.setAttribute("y",size.height/1.5),label.appendChild(document.createTextNode(this.options.label)),this.svg.appendChild(label)}this.setValue(isFinite(this.options.value)?this.options.value:this.options.from)}var defaults={from:0,to:100,angle:270,segments:[],step:20,inset:!1};Gauge.prototype.size=function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}},Gauge.prototype.setValue=function(value){this.delta>0&&(value<this.options.from?value=this.options.from:value>this.options.to&&(value=this.options.to)),this.delta<0&&(value>this.options.from?value=this.options.from:value<this.options.to&&(value=this.options.to));var angle=(Math.abs((value-this.options.from)/this.delta)-.5)*this.options.angle,transform="rotate("+angle+"deg)";return this.arrow.style.transform=transform,this.arrow.style.msTransform=transform,this.value},"function"==typeof window.jQuery&&(window.jQuery.fn.gauge=function(options){var $el=window.jQuery(this),gauge=$el.data("gauge");return gauge||(gauge=new Gauge($el[0],options),$el.data("gauge",gauge)),isFinite(options)&&gauge.setValue(options),$el}),"function"==typeof window.define&&window.define.amd?window.define("gauge",[],function(){return Gauge}):"object"==typeof module?module.exports=Gauge:window.Gauge=Gauge}();
//# sourceMappingURL=gauge.map